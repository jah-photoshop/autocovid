#!/bin/bash

echo This script attempts to download data files from the coronavirus.data.gov.uk website automically.
echo
echo Making output directory: /data
mkdir data
echo
echo Downloading cases by specimen date data to /data/cases.csv
curl 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaType=nation&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newCasesBySpecimenDate%22:%22newCasesBySpecimenDate%22,%22cumCasesBySpecimenDate%22:%22cumCasesBySpecimenDate%22%7D&format=csv' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:81.0) Gecko/20100101 Firefox/81.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-GB,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Referer: https://coronavirus.data.gov.uk/cases' -H 'Cookie: _ga=GA1.3.1147216853.1600719838; _gid=GA1.3.561929123.1601366881; _gat_gtag_UA_161400643_2=1' -H 'Upgrade-Insecure-Requests: 1' -o data/cases.csv
echo
echo Downloading testing by pillar data to /data/testing.csv
curl 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaName=United%2520Kingdom;areaType=overview&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newPillarOneTestsByPublishDate%22:%22newPillarOneTestsByPublishDate%22,%22newPillarTwoTestsByPublishDate%22:%22newPillarTwoTestsByPublishDate%22,%22newPillarThreeTestsByPublishDate%22:%22newPillarThreeTestsByPublishDate%22,%22newPillarFourTestsByPublishDate%22:%22newPillarFourTestsByPublishDate%22,%22newTestsByPublishDate%22:%22newTestsByPublishDate%22,%22cumPillarOneTestsByPublishDate%22:%22cumPillarOneTestsByPublishDate%22,%22cumPillarTwoTestsByPublishDate%22:%22cumPillarTwoTestsByPublishDate%22,%22cumPillarThreeTestsByPublishDate%22:%22cumPillarThreeTestsByPublishDate%22,%22cumPillarFourTestsByPublishDate%22:%22cumPillarFourTestsByPublishDate%22,%22cumTestsByPublishDate%22:%22cumTestsByPublishDate%22%7D&format=csv' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:81.0) Gecko/20100101 Firefox/81.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-GB,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Referer: https://coronavirus.data.gov.uk/testing' -H 'Cookie: _ga=GA1.3.1147216853.1600719838; _gid=GA1.3.561929123.1601366881; _gat_gtag_UA_161400643_2=1' -H 'Upgrade-Insecure-Requests: 1' -o data/testing.csv
echo
echo Downloading testing capacity data to /data/capacity.csv
curl 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaName=United%2520Kingdom;areaType=overview&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22plannedCapacityByPublishDate%22:%22plannedCapacityByPublishDate%22,%22capacityPillarOne%22:%22capacityPillarOne%22,%22capacityPillarTwo%22:%22capacityPillarTwo%22,%22capacityPillarThree%22:%22capacityPillarThree%22,%22capacityPillarFour%22:%22capacityPillarFour%22,%22capacityPillarOneTwo%22:%22capacityPillarOneTwo%22,%22newTestsByPublishDate%22:%22newTestsByPublishDate%22,%22newPillarOneTestsByPublishDate%22:%22newPillarOneTestsByPublishDate%22,%22newPillarTwoTestsByPublishDate%22:%22newPillarTwoTestsByPublishDate%22,%22newPillarThreeTestsByPublishDate%22:%22newPillarThreeTestsByPublishDate%22,%22newPillarFourTestsByPublishDate%22:%22newPillarFourTestsByPublishDate%22,%22newPillarOneTwoTestsByPublishDate%22:%22newPillarOneTwoTestsByPublishDate%22,%22cumTestsByPublishDate%22:%22cumTestsByPublishDate%22,%22cumPillarOneTwoTestsByPublishDate%22:%22cumPillarOneTwoTestsByPublishDate%22%7D&format=csv' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:81.0) Gecko/20100101 Firefox/81.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-GB,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Referer: https://coronavirus.data.gov.uk/testing' -H 'Cookie: _ga=GA1.3.1147216853.1600719838; _gid=GA1.3.561929123.1601366881; _gat_gtag_UA_161400643_2=1' -H 'Upgrade-Insecure-Requests: 1' -o data/capacity.csv
echo
echo Downloading admissions data to /data/admissions.csv
curl 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaType=nation&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22newAdmissions%22:%22newAdmissions%22,%22cumAdmissions%22:%22cumAdmissions%22%7D&format=csv' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:81.0) Gecko/20100101 Firefox/81.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-GB,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Referer: https://coronavirus.data.gov.uk/healthcare' -H 'Cookie: _ga=GA1.3.1147216853.1600719838; _gid=GA1.3.561929123.1601366881; _gat_gtag_UA_161400643_2=1' -H 'Upgrade-Insecure-Requests: 1' -o data/admissions.csv
echo
echo Downloading patients in hospital data to /data/patients.csv
curl 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaType=nation&structure=%7B%22areaType%22:%22areaType%22,%22areaName%22:%22areaName%22,%22areaCode%22:%22areaCode%22,%22date%22:%22date%22,%22hospitalCases%22:%22hospitalCases%22%7D&format=csv' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:81.0) Gecko/20100101 Firefox/81.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Accept-Language: en-GB,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Referer: https://coronavirus.data.gov.uk/healthcare' -H 'Cookie: _ga=GA1.3.1147216853.1600719838; _gid=GA1.3.561929123.1601366881; _gat_gtag_UA_161400643_2=1' -H 'Upgrade-Insecure-Requests: 1' -o data/patients.csv
